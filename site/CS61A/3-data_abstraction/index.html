<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://jessiejizhe.github.io/techie/CS61A/3-data_abstraction/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>CS61A-data abstraction - Techie</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Techie</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">CS61A <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ex-function/" class="dropdown-item">function</a>
</li>
                                    
<li>
    <a href="../ex-recursion/" class="dropdown-item">recursion</a>
</li>
                                    
<li>
    <a href="../ex-sequence/" class="dropdown-item">sequence</a>
</li>
                                    
<li>
    <a href="../ex-tree/" class="dropdown-item">tree</a>
</li>
                                    
<li>
    <a href="../ex-linked_list/" class="dropdown-item">linked_list</a>
</li>
                                    
<li>
    <a href="../1-intro/" class="dropdown-item">CS61A-intro</a>
</li>
                                    
<li>
    <a href="../2-function/" class="dropdown-item">CS61A-function</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">CS61A-data abstraction</a>
</li>
                                    
<li>
    <a href="../4-object_oriented/" class="dropdown-item">CS61A-object oriented</a>
</li>
                                    
<li>
    <a href="../5-computer_programs/" class="dropdown-item">CS61A-computer programs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">DevOps <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../devops/git/" class="dropdown-item">git</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Apache <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Apache/Hadoop/" class="dropdown-item">Hadoop</a>
</li>
                                    
<li>
    <a href="../../Apache/MapReduce/" class="dropdown-item">MapReduce</a>
</li>
                                    
<li>
    <a href="../../Apache/HDFS/" class="dropdown-item">HDFS</a>
</li>
                                    
<li>
    <a href="../../Apache/Spark/" class="dropdown-item">Spark</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../2-function/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../4-object_oriented/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#data-abstraction" class="nav-link">Data Abstraction</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#identity-operators" class="nav-link">Identity Operators</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#native-data-types" class="nav-link">Native Data Types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#data-abstraction_1" class="nav-link">Data Abstraction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sequences" class="nav-link">Sequences</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sequence-iteration" class="nav-link">Sequence Iteration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sequence-unpacking" class="nav-link">Sequence Unpacking</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sequence-aggregation" class="nav-link">Sequence Aggregation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#higher-order-function" class="nav-link">Higher-Order Function</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#conventional-names" class="nav-link">Conventional Names</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sequence-abstraction" class="nav-link">Sequence Abstraction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#strings" class="nav-link">Strings</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#dictionaries" class="nav-link">Dictionaries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#trees" class="nav-link">Trees</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#strings_1" class="nav-link">Strings</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mutable-objects" class="nav-link">Mutable Objects</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mutation" class="nav-link">Mutation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#lists" class="nav-link">Lists</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tuples" class="nav-link">Tuples</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#linked-lists" class="nav-link">Linked Lists</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sets" class="nav-link">Sets</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#nonlocal-statements" class="nav-link">Nonlocal Statements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mutable-functions" class="nav-link">Mutable Functions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#iterators" class="nav-link">Iterators</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#dictionary-iteration" class="nav-link">Dictionary Iteration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#built-in-iterator-functions" class="nav-link">Built-in Iterator Functions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#generators" class="nav-link">Generators</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="data-abstraction">Data Abstraction</h1>
<p><strong>Containers</strong></p>
<p>Built-in operators for testing whether an element appears in a compound value.</p>
<pre><code class="language-python">&gt;&gt;&gt; digits = [1, 8, 2, 8]
&gt;&gt;&gt; 1 in digits
True
&gt;&gt;&gt; 8 in digits
True
&gt;&gt;&gt; 5 not in digits
True
&gt;&gt;&gt; not(5 in digits)
True
</code></pre>
<h2 id="identity-operators">Identity Operators</h2>
<ul>
<li><strong>Identity</strong></li>
<li><code>&lt;exp0&gt;</code> <strong>is</strong> <code>&lt;exp1&gt;</code></li>
<li>
<p>evaluates to True if both <code>&lt;exp0&gt;</code> and <code>&lt;exp1&gt;</code> evaluate to the same object</p>
</li>
<li>
<p><strong>Equality</strong></p>
</li>
<li><code>&lt;exp0&gt;</code> <strong>==</strong> <code>&lt;exp1&gt;</code></li>
<li>evaluates to True if both <code>&lt;exp0&gt;</code> and <code>&lt;exp1&gt;</code> evaluate to equal values</li>
<li>Identical objects are always equal values</li>
</ul>
<h2 id="native-data-types">Native Data Types</h2>
<p>Every value in Python has a <code>class</code> that determines what type of value it is. Values that share a class also share behavior. </p>
<p>Native data types have the following properties:</p>
<ul>
<li>There are expressions that evaluate to values of native types, called <strong><em>literals</em></strong>.</li>
<li>There are built-in functions and operators to manipulate values of native types.</li>
</ul>
<p>Python includes three native numeric types: integers (<code>int</code>), real numbers (<code>float</code>), and complex numbers (<code>complex</code>).</p>
<p>Integer literals (sequences of adjacent numerals) evaluate to <code>int</code> values, and mathematical operators manipulate these values.</p>
<h2 id="data-abstraction_1">Data Abstraction</h2>
<p><strong>Lecture Slide</strong></p>
<p>We need to guarantee that constructor and selector functions work together to specify the right behavior.</p>
<p>Data abstraction uses selectors and constructors to define behavior.</p>
<p>If behavior conditions are met, then the representation is valid.</p>
<p>You can recognize data abstraction by its behavior.</p>
<p><strong>rational data abstraction implemented as functions</strong></p>
<p><strong>constructor</strong> is a higher order function</p>
<pre><code class="language-python">def rational(n, d):
    def select(name):
        if name == 'n':
            return n
        elif name == 'd':
            return d
    return select
</code></pre>
<p><strong>selector</strong> calls the object itself</p>
<pre><code class="language-python">def numer(x):
    return x('n')
def denom(x):
    return x('d')
</code></pre>
<p><strong>The Closure Property of Data Types</strong></p>
<ul>
<li>A method for combining data values satisfies the closure property if:</li>
<li>The result of combination can itself be combined using the same method</li>
<li>Closure is powerful because it permits us to create hierarchical structures </li>
<li>Hierarchical structures are made up of parts, which themselves are made up of parts, and so on</li>
</ul>
<p><strong>Box-and-Pointer Notation in Environment Diagrams</strong></p>
<p>Lists are represented as a row of index-labeled adjacent boxes, one per element.</p>
<p>Each box either contains a primitive value or points to a compound value.</p>
<p><strong>From Textbook</strong></p>
<p>The general technique of isolating the parts of a program that deal with how data are represented from the parts that deal with how data are manipulated is a powerful design methodology called <strong><em>data abstraction</em></strong>. </p>
<p>Data abstraction makes programs much easier to design, maintain, and modify.</p>
<p>In general, the underlying idea of data abstraction is to identify a basic set of operations in terms of which all manipulations of values of some kind will be expressed, and then to use only those operations in manipulating the data</p>
<p>A powerful strategy for designing programs: <strong><em>wishful thinking</em></strong>.</p>
<p><strong>Compound Data Structure: List</strong></p>
<p>0-indexed in Python: the index represents how far an element is offset from the beginning of the list.</p>
<pre><code class="language-python">pair = [10, 20]
x,y = pair

&gt;&gt;&gt; pair[0]
10
&gt;&gt;&gt; from operator import getitem
&gt;&gt;&gt; getitem(pair, 0)
10
</code></pre>
<p>We don't actually need the <code>list</code> type to create pairs.</p>
<pre><code class="language-python">def pair(x, y):
    &quot;&quot;&quot;Return a function that represents a pair.&quot;&quot;&quot;
    def get(index):
        if index == 0:
            return x
        elif index == 1:
            return y
    return get

def select(p, i):
    &quot;&quot;&quot;Return the element at index i of pair p.&quot;&quot;&quot;
    return p(i)
</code></pre>
<pre><code class="language-python">&gt;&gt;&gt; p = pair(20, 14)
&gt;&gt;&gt; select(p, 0)
20
&gt;&gt;&gt; select(p, 1)
14
</code></pre>
<h2 id="sequences">Sequences</h2>
<p>A sequence is an ordered collection of values.</p>
<p>Common behavior of many kinds of sequences</p>
<ul>
<li><strong>Length.</strong> A sequence has a finite length. An empty sequence has length 0.</li>
<li>A sequence has an element corresponding to any non-negative integer index less than its length, starting at 0 for the first element.</li>
</ul>
<p>list</p>
<pre><code class="language-python">&gt;&gt;&gt; digits = [1, 8, 2, 8]
&gt;&gt;&gt; len(digits)
4
&gt;&gt;&gt; digits[3]
8
</code></pre>
<p><strong>append</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; [2, 7] + digits * 2
[2, 7, 1, 8, 2, 8, 1, 8, 2, 8]
</code></pre>
<p>list in list</p>
<pre><code class="language-python">&gt;&gt;&gt; pairs = [[10, 20], [30, 40]]
&gt;&gt;&gt; pairs[1]
[30, 40]
&gt;&gt;&gt; pairs[1][0]
30
</code></pre>
<h2 id="sequence-iteration">Sequence Iteration</h2>
<pre><code class="language-python"># index
def count(s, value):
    &quot;&quot;&quot;Count the number of occurrences of value in sequence s.&quot;&quot;&quot;
    total, index = 0, 0
    while index &lt; len(s):
        if s[index] == value:
            total = total + 1
        index = index + 1
    return total

# element
def count(s, value):
    &quot;&quot;&quot;Count the number of occurrences of value in sequence s.&quot;&quot;&quot;
    total = 0
    for elem in s:
        if elem == value:
            total = total + 1
    return total
</code></pre>
<p>recursively</p>
<pre><code class="language-python">def mysum(L):
    if L == []:
        return 0
    else:
        return L[0] + mysum(L[1:])
</code></pre>
<h2 id="sequence-unpacking">Sequence Unpacking</h2>
<pre><code class="language-python">&gt;&gt;&gt; pairs = [[1,2], [2,2], [3,2], [4,4]]
&gt;&gt;&gt; for x, y in pairs:
        if x == y:
            same_count = same_count + 1
&gt;&gt;&gt; same_count
2
</code></pre>
<p><strong>range</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; list(range(-2, 2))
[-2, -1, 0, 1]

&gt;&gt;&gt; list(range(5, 8))
[5, 6, 7]

&gt;&gt;&gt; list(range(4))
[0, 1, 2, 3]
</code></pre>
<p><strong>list comprehensions</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; odds = [1, 3, 5, 7, 9]

&gt;&gt;&gt; [x+1 for x in odds]
[2, 4, 6, 8, 10]

&gt;&gt;&gt; [x for x in odds if 25 % x == 0]
[1, 5]
</code></pre>
<h2 id="sequence-aggregation">Sequence Aggregation</h2>
<p>Several built-in functions take iterable arguments and aggregate them into a value.</p>
<ul>
<li><code>sum</code>: Return the sum of a 'start' value (default: 0) plus an iterable of numbers.</li>
<li><code>max</code>: With a single iterable argument, return its largest item. With two or more arguments, return the largest argument.</li>
<li><code>all</code>: Return True if bool(x) is True for all values x in the iterable. If the iterable is empty, return True.</li>
</ul>
<pre><code class="language-python">def divisors(n):
    return [1] + [x for x in range(2, n) if n % x == 0]
</code></pre>
<pre><code class="language-python">def width(area, height):
    assert area % height == 0
    return area // height

def perimeter(width, height):
    return 2 * width + 2 * height

def minimum_perimeter(area):
    heights = divisors(area)
    perimeters = [perimeter(width(area, h), h) for h in heights]
    return min(perimeters)

&gt;&gt;&gt; [minimum_perimeter(n) for n in range(1, 10)]
[4, 6, 8, 8, 12, 10, 16, 12, 12]
</code></pre>
<h2 id="higher-order-function">Higher-Order Function</h2>
<pre><code class="language-python">def apply_to_all(map_fn, s):
    return [map_fn(x) for x in s]

def keep_if(filter_fn, s):
    return [x for x in s if filter_fn(x)]

def reduce(reduce_fn, s, initial):
    reduced = initial
    for x in s:
        reduced = reduce_fn(reduced, x)
    return reduced
</code></pre>
<p>i.e.</p>
<pre><code class="language-python">&gt;&gt;&gt; reduce(mul, [2, 4, 8], 1)
64
</code></pre>
<p>find perfect numbers</p>
<pre><code class="language-python">&gt;&gt;&gt; def divisors_of(n):
        divides_n = lambda x: n % x == 0
        return [1] + keep_if(divides_n, range(2, n))
&gt;&gt;&gt; divisors_of(12)
[1, 2, 3, 4, 6]

&gt;&gt;&gt; from operator import add
&gt;&gt;&gt; def sum_of_divisors(n):
        return reduce(add, divisors_of(n), 0)
&gt;&gt;&gt; def perfect(n):
        return sum_of_divisors(n) == n

&gt;&gt;&gt; keep_if(perfect, range(1, 1000))
[1, 6, 28, 496]
</code></pre>
<h2 id="conventional-names">Conventional Names</h2>
<p>The more common name for <code>apply_to_all</code> is <code>map</code> .</p>
<p>The more common name for <code>keep_if</code> is <code>filter</code>.</p>
<p>The <code>reduce</code> function is built into the <code>functools</code> module of the Python standard library. In this version, the <code>initial</code> argument is optional.</p>
<pre><code class="language-python">&gt;&gt;&gt; apply_to_all = lambda map_fn, s: list(map(map_fn, s))
&gt;&gt;&gt; keep_if = lambda filter_fn, s: list(filter(filter_fn, s))

&gt;&gt;&gt; from functools import reduce
&gt;&gt;&gt; from operator import mul
&gt;&gt;&gt; def product(s):
        return reduce(mul, s)

&gt;&gt;&gt; product([1, 2, 3, 4, 5])
120
</code></pre>
<h2 id="sequence-abstraction">Sequence Abstraction</h2>
<p><strong>membership</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; digits
[1, 8, 2, 8]
&gt;&gt;&gt; 2 in digits
True
&gt;&gt;&gt; 1828 not in digits
True
</code></pre>
<p><strong>slicing</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; digits[0:2]
[1, 8]
&gt;&gt;&gt; digits[1:]
[8, 2, 8]
&gt;&gt;&gt; digits[::-1]
[8, 2, 8, 1]

&gt;&gt;&gt; digits[0:len(digits):2]
[1, 2]

&gt;&gt;&gt; [digits[i] for i in range(1,3)]
[8, 2]
</code></pre>
<h2 id="strings">Strings</h2>
<p><strong>assert -- used for debugging</strong></p>
<pre><code class="language-python">x = &quot;hello&quot;

#if condition returns True, then nothing happens:
assert x == &quot;hello&quot;

#if condition returns False, AssertionError is raised:
assert x == &quot;goodbye&quot;, &quot;x should be hello&quot;
</code></pre>
<p><strong>membership</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; 'here' in &quot;Where's Waldo?&quot;
True
</code></pre>
<p><strong>multiline literals</strong></p>
<p><code>\n</code> = line feed starts a new line</p>
<pre><code class="language-python">&gt;&gt;&gt; &quot;&quot;&quot;The Zen of Python
claims, Readability counts.
Read more: import this.&quot;&quot;&quot;
'The Zen of Python\nclaims, &quot;Readability counts.&quot;\nRead more: import this.'
</code></pre>
<p><strong>string coercion</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; str(2) + ' is an element of ' + str(digits)
'2 is an element of [1, 8, 2, 8]'
</code></pre>
<h2 id="dictionaries">Dictionaries</h2>
<p>construct a dictionary from tuples</p>
<pre><code class="language-python">&gt;&gt;&gt; dict([(3, 9), (4, 16), (5, 25)])
{3: 9, 4: 16, 5: 25}
</code></pre>
<p>example</p>
<pre><code class="language-python">numerals = {'I': 1, 'V': 5, 'X': 10}

&gt;&gt;&gt; numerals['X']
10
</code></pre>
<p><strong>key, value, pair</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; numerals.keys()
dict_keys(['I', 'V', 'X'])

&gt;&gt;&gt; numerals.values()
dict_values([1, 5, 10])

&gt;&gt;&gt; numerals.items()
dict_items([('I', 1), ('V', 5), ('X', 10)])
</code></pre>
<p><strong>if keys in dictionary</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; 'X' in numerals
True
&gt;&gt;&gt; 'X-ray' in numerals
False
&gt;&gt;&gt; numerals.get('X', 0)
10
&gt;&gt;&gt; numerals.get('X-ray', 0)
0
</code></pre>
<p><strong>dictionary comprehension</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; squares = {x:x*x for x in range(10)}
&gt;&gt;&gt; squares
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
&gt;&gt;&gt; squares[7]
49
</code></pre>
<p>limitations</p>
<ul>
<li>dictionaries are <strong>unordered</strong> collections of key-value pairs</li>
<li>restrictions</li>
<li>two keys cannot be equal</li>
<li>a <strong>key cannot be</strong> a list or a dictionary (or any <strong>mutable type</strong>)</li>
</ul>
<p><strong>dictionary object</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; numerals['X'].pop('X')
&gt;&gt;&gt; numerals.get('X')

&gt;&gt;&gt; numerals.get('A', 0)
0
&gt;&gt;&gt; numerals.get('V', 0)
5
</code></pre>
<h2 id="trees">Trees</h2>
<p><strong>Recursive description (wooden trees)</strong></p>
<ul>
<li>A <strong>tree</strong> has a root <strong>label</strong> and a list of <strong>branches</strong></li>
<li>Each branch is a <strong>tree</strong></li>
<li>A <strong>tree</strong> with <strong>zero branches</strong> is called a <strong>leaf</strong></li>
<li>A <strong>tree</strong> starts at the <strong>root</strong></li>
</ul>
<p><strong>Relative description (family trees)</strong></p>
<ul>
<li>Each location in a tree is called a <strong>node</strong></li>
<li>Each <strong>node</strong> has a <strong>label</strong> that can be any value (labels are usually referred as  locations)</li>
<li>One node can be the <strong>parent/child</strong> of another (ancestor, descendant, sibling .etc)</li>
<li>The top node is the <strong>root node</strong></li>
</ul>
<p><strong>Implementation</strong></p>
<ul>
<li>A tree has a root label and a list of branches</li>
<li>Each branch is a tree</li>
</ul>
<p>Constructor</p>
<pre><code class="language-python">def tree(label, branches=[]):
    for branch in branches:
        assert is_tree(branch) # check: each branch is a tree
    return [label] + branches
</code></pre>
<p>Selectors</p>
<pre><code class="language-python">def label(tree):
    return tree[0]

def branches(tree):
    return tree[1:]
</code></pre>
<p>check tree or leaf</p>
<pre><code class="language-python">def is_tree(tree):
    if type(tree) != list or len(tree) &lt; 1:
        return False
    for branch in branches (tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    return not branches(tree) # check branches are empty
</code></pre>
<p>example</p>
<pre><code class="language-python">&gt;&gt;&gt; tree(1)
[1]
&gt;&gt;&gt; is_leaf(tree(1))
True

&gt;&gt;&gt; t = tree(1, [tree(5, [tree(7)]), tree(6)])
&gt;&gt;&gt; t
[1, [5, [7]], [6]]
&gt;&gt;&gt; label(t)
1
&gt;&gt;&gt; branches(t)
[[5, [7]], [6]]
&gt;&gt;&gt; branches(t)[0]
[5, [7]]
&gt;&gt;&gt; is_tree(branches(t)[0])
True
&gt;&gt;&gt; label(branches(t)[0])
5
</code></pre>
<p>a tree with no branches</p>
<pre><code class="language-python">&gt;&gt;&gt; leaf = tree(4, [])  # same as tree(4)
&gt;&gt;&gt; is_tree(leaf)
True
&gt;&gt;&gt; branches(leaf)
[]
</code></pre>
<h2 id="strings_1">Strings</h2>
<pre><code class="language-python">&gt;&gt;&gt; s = 'Hello'
&gt;&gt;&gt; dir(s)
['__add__', '__class__', '__contains__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'capitalize', 'casefold', 'center', 'count', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'format_map', 'index', 'isalnum', 'isalpha', 'isascii', 'isdecimal', 'isdigit', 'isidentifier', 'islower', 'isnumeric', 'isprintable', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']
</code></pre>
<p><strong>ASCII -- American Standard Code for Information Interchange</strong></p>
<ul>
<li>Layout was chosen to support sorting by character code</li>
<li>Rows indexed 2-5 are a useful 6-bit (64 element) subset</li>
<li>Control characters were designed for transmission</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; ord('A')
65
&gt;&gt;&gt; hex(ord('A'))
'0x41'
# row 4, column 1 in ASCII table
</code></pre>
<p>get a sound (alert) from the computer -- <code>\a</code> is "Bell" in ASCII</p>
<pre><code class="language-python">&gt;&gt;&gt; print('\a')

</code></pre>
<p><strong>Unicode Standard</strong></p>
<p>as of 2021</p>
<ul>
<li>137,994 characters in Unicode 12.1</li>
<li>150 scripts (organized)</li>
<li>Enumeration of character properties, such as case</li>
<li>Supports bidirectional display order</li>
<li>A canonical name for every character</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; print('\u0420\u043e\u0441\u0441\u0438\u044f')
Россия

&gt;&gt;&gt; from unicodedata import name, lookup
&gt;&gt;&gt; name('A')
'LATIN CAPITAL LETTER A'
&gt;&gt;&gt; lookup('WHITE SMILING FACE')
'☺'
&gt;&gt;&gt; lookup('WHITE SMILING FACE').encode()
b'\xe2\x98\xba'
</code></pre>
<h2 id="mutable-objects">Mutable Objects</h2>
<ul>
<li>All names that refer to the same object are affected by a mutation</li>
<li>Only objects of mutable types can change: <strong>lists</strong> &amp; <strong>dictionaries</strong></li>
</ul>
<p><strong>Mutation Can Happen Within a Function Call</strong></p>
<p>A function can change the value of any object in its scope.</p>
<h2 id="mutation">Mutation</h2>
<p><strong>Sameness and Change</strong></p>
<ul>
<li>As long as we never modify objects, a compound object is just the totality of its pieces</li>
<li>A rational number is just its numerator and denominator</li>
<li>This view is no longer valid in the presence of change</li>
<li>A compound data object has an "identity" in addition to the pieces of which it is composed</li>
<li>A list is still "the same" list even if we change its contents</li>
<li>Conversely, we could have two lists that happen to have the same contents, but are different</li>
</ul>
<p><strong>Mutable Default Arguments are Dangerous</strong></p>
<p>A default argument value is part of a function value, not generated by a call</p>
<h2 id="lists">Lists</h2>
<pre><code class="language-python">&gt;&gt;&gt; suits = ['coin', 'string', 'myriad']  # A list literal
&gt;&gt;&gt; original_suits = suits

&gt;&gt;&gt; suits.pop()             # Removes and returns the final element
'myriad'
&gt;&gt;&gt; suits.remove('string')  # Removes the first element that equals the argument
&gt;&gt;&gt; suits.append('cup')              # Add an element to the end
&gt;&gt;&gt; suits.extend(['sword', 'club'])  # Add all elements of a list to the end
&gt;&gt;&gt; suits[2] = 'spade'  # Replace an element
&gt;&gt;&gt; suits[0:2] = ['heart', 'diamond']  # Replace a slice

&gt;&gt;&gt; suits
['heart', 'diamond', 'spade', 'club']
&gt;&gt;&gt; original_suits
['heart', 'diamond', 'spade', 'club']
</code></pre>
<p><strong>Lists in Lists in Lists</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; t = [1, 2, 3]
&gt;&gt;&gt; t[1:3] = [t]
&gt;&gt;&gt; [t]
[[1, [...]]]
&gt;&gt;&gt; t.extend(t)
&gt;&gt;&gt; t
[1, [...], 1, [...]]

&gt;&gt;&gt; t = [1]
&gt;&gt;&gt; t.append(t)
&gt;&gt;&gt; t
[1, [...]]
# it's actually [1, [1, [1, [...]]]]
# in printing, it seems forever
# in storage, it is not
</code></pre>
<p>another example</p>
<pre><code class="language-python">&gt;&gt;&gt; t = [[1, 2], [3, 4]]
&gt;&gt;&gt; t[0].append(t[1:2])
&gt;&gt;&gt; t
[[1, 2, [[3, 4]]], [3, 4]]
</code></pre>
<p><strong>slicing -- inserting vs replacing -- can change list length</strong></p>
<p><code>s[0:0]</code> -- inserting</p>
<pre><code class="language-python">&gt;&gt;&gt; s1 = [1, 2, 3]
&gt;&gt;&gt; t = [4, [5], 6]
&gt;&gt;&gt; s1[0:0] = t
&gt;&gt;&gt; s1
[4, [5], 6, 1, 2, 3]
</code></pre>
<p><code>s[0:1]</code> -- replacing</p>
<pre><code class="language-python">&gt;&gt;&gt; s2 = [1, 2, 3]
&gt;&gt;&gt; s2[0:1] = t
&gt;&gt;&gt; s2
[4, [5], 6, 2, 3]
</code></pre>
<p><strong>element replacing -- doesn't change list length</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; s3 = [1, 2, 3]
&gt;&gt;&gt; t = [4, [5], 6]
&gt;&gt;&gt; s3[0] = t
&gt;&gt;&gt; s3
[[4, [5], 6], 2, 3]
</code></pre>
<p><strong>make a copy</strong></p>
<pre><code class="language-python">s = [1, 2, 3]
t = list(s)
</code></pre>
<p><code>append</code> vs <code>extend</code></p>
<pre><code class="language-python">&gt;&gt;&gt; l = [1, 2, 3]
&gt;&gt;&gt; l.append(4)
&gt;&gt;&gt; l
[1, 2, 3, 4]
&gt;&gt;&gt; l.append([5,6])
&gt;&gt;&gt; l
[1, 2, 3, 4, [5, 6]]
&gt;&gt;&gt; l.extend([7,8])
&gt;&gt;&gt; l
[1, 2, 3, 4, [5, 6], 7, 8]
&gt;&gt;&gt; l.extend(9)
!ERROR!
</code></pre>
<p><code>+</code> creates a new list; <code>append()</code> modifies on the original list</p>
<p><strong>list mutations</strong></p>
<ul>
<li><code>append(el)</code>: Adds el to the end of the list, and returns None</li>
<li><code>extend(lst)</code>: Extends the list by concatenating it with lst, and returns None</li>
<li><code>insert(i, el)</code>: Insert el at index i (does not replace element but adds a new one), and returns None</li>
<li><code>remove(el)</code>: Removes the first occurrence of el in list, otherwise errors, and returns None</li>
<li><code>pop(i)</code>: Removes and returns the element at index i</li>
</ul>
<h2 id="tuples">Tuples</h2>
<p>Immutable sequences</p>
<pre><code class="language-python">&gt;&gt;&gt; (3, 4, 5, 6)
(3, 4, 5, 6)
&gt;&gt;&gt; 3, 4, 5, 6
(3, 4, 5, 6)
&gt;&gt;&gt; ()
()
&gt;&gt;&gt; tuple()
()
&gt;&gt;&gt; tuple([3, 4, 5, 6])
(3, 4, 5, 6)
</code></pre>
<p>operations</p>
<pre><code class="language-python">&gt;&gt;&gt; (3, 4) + (5, 6)
(3, 4, 5, 6)
&gt;&gt;&gt; 5 in (3, 4, 5, 6)
True
</code></pre>
<p>tuples can be used as keys in dictionary, but list cannot</p>
<pre><code class="language-python">&gt;&gt;&gt; {(1, 2): 3}
{(1, 2): 3}

&gt;&gt;&gt; {[1, 2]: 3}
!ERROR!
</code></pre>
<p>An immutable sequence may still change if it contains a mutable value as an element</p>
<pre><code class="language-python">&gt;&gt;&gt; s = ([1, 2], 3)
&gt;&gt;&gt; s[0][0] = 4
&gt;&gt;&gt; s
([4, 2], 3)

&gt;&gt;&gt; s = ([1, 2], 3)
&gt;&gt;&gt; s[0] = 4
!ERROR!
</code></pre>
<h2 id="linked-lists">Linked Lists</h2>
<ul>
<li>A linked list is either empty or a first value and the rest of the linked list</li>
<li>A common representation of a sequence constructed from nested pairs is called a <strong><em>linked list</em></strong>.</li>
</ul>
<pre><code class="language-python">four = [1, [2, [3, [4, 'empty']]]]
</code></pre>
<p>recursive structure</p>
<pre><code class="language-python">empty = 'empty'

def is_link(s):
    &quot;&quot;&quot;s is a linked list if it is empty or a (first, rest) pair.&quot;&quot;&quot;
    return s == empty or (len(s) == 2 and is_link(s[1]))

def link(first, rest):
    &quot;&quot;&quot;Construct a linked list from its first element and the rest.&quot;&quot;&quot;
    assert is_link(rest), &quot;rest must be a linked list.&quot;
    return [first, rest]

def first(s):
    &quot;&quot;&quot;Return the first element of a linked list s.&quot;&quot;&quot;
    assert is_link(s), &quot;first only applies to linked lists.&quot;
    assert s != empty, &quot;empty linked list has no first element.&quot;
    return s[0]

def rest(s):
    &quot;&quot;&quot;Return the rest of the elements of a linked list s.&quot;&quot;&quot;
    assert is_link(s), &quot;rest only applies to linked lists.&quot;
    assert s != empty, &quot;empty linked list has no rest.&quot;
    return s[1]
</code></pre>
<p><code>link</code> is a constructor and <code>first</code> and <code>rest</code> are selectors for an abstract data representation of linked lists. The behavior condition for a linked list is that, like a pair, its constructor and selectors are inverse functions.</p>
<pre><code class="language-python">&gt;&gt;&gt; four = link(1, link(2, link(3, link(4, empty))))
&gt;&gt;&gt; first(four)
1
&gt;&gt;&gt; rest(four)
[2, [3, [4, 'empty']]]
</code></pre>
<p>linked list satisfies sequence abstraction</p>
<pre><code class="language-python">def len_link(s):
    &quot;&quot;&quot;Return the length of linked list s.&quot;&quot;&quot;
    length = 0
    while s != empty:
        s, length = rest(s), length + 1
    return length

def getitem_link(s, i):
    &quot;&quot;&quot;Return the element at index i of linked list s.&quot;&quot;&quot;
    while i &gt; 0:
        s, i = rest(s), i - 1
    return first(s)
</code></pre>
<p>recursively</p>
<pre><code class="language-python">def len_link_recursive(s):
    &quot;&quot;&quot;Return the length of a linked list s.&quot;&quot;&quot;
    if s == empty:
        return 0
    return 1 + len_link_recursive(rest(s))

def getitem_link_recursive(s, i):
    &quot;&quot;&quot;Return the element at index i of linked list s.&quot;&quot;&quot;
    if i == 0:
        return first(s)
    return getitem_link_recursive(rest(s), i - 1)
</code></pre>
<p>transform list</p>
<pre><code class="language-python">&gt;&gt;&gt; def extend_link(s, t):
        &quot;&quot;&quot;Return a list with the elements of s followed by those of t.&quot;&quot;&quot;
        assert is_link(s) and is_link(t)
        if s == empty:
            return t
        else:
            return link(first(s), extend_link(rest(s), t))

&gt;&gt;&gt; extend_link(four, four)
[1, [2, [3, [4, [1, [2, [3, [4, 'empty']]]]]]]]

&gt;&gt;&gt; def apply_to_all_link(f, s):
        &quot;&quot;&quot;Apply f to each element of s.&quot;&quot;&quot;
        assert is_link(s)
        if s == empty:
            return s
        else:
            return link(f(first(s)), apply_to_all_link(f, rest(s)))

&gt;&gt;&gt; apply_to_all_link(lambda x: x*x, four)
[1, [4, [9, [16, 'empty']]]]

&gt;&gt;&gt; def keep_if_link(f, s):
        &quot;&quot;&quot;Return a list with elements of s for which f(e) is true.&quot;&quot;&quot;
        assert is_link(s)
        if s == empty:
            return s
        else:
            kept = keep_if_link(f, rest(s))
            if f(first(s)):
                return link(first(s), kept)
            else:
                return kept

&gt;&gt;&gt; keep_if_link(lambda x: x%2 == 0, four)
[2, [4, 'empty']]

</code></pre>
<p>combine list</p>
<pre><code class="language-python">&gt;&gt;&gt; def join_link(s, separator):
        &quot;&quot;&quot;Return a string of all elements in s separated by separator.&quot;&quot;&quot;
        if s == empty:
            return &quot;&quot;
        elif rest(s) == empty:
            return str(first(s))
        else:
            return str(first(s)) + separator + join_link(rest(s), separator)

&gt;&gt;&gt; join_link(four, &quot;, &quot;)
'1, 2, 3, 4'
</code></pre>
<p>count partitions</p>
<pre><code class="language-python">def partitions(n, m):
        &quot;&quot;&quot;Return a linked list of partitions of n using parts of up to m.
        Each partition is represented as a linked list.
        &quot;&quot;&quot;
        if n == 0:
            return link(empty, empty) # A list containing the empty partition
        elif n &lt; 0 or m == 0:
            return empty
        else:
            using_m = partitions(n-m, m)
            with_m = apply_to_all_link(lambda s: link(m, s), using_m)
            without_m = partitions(n, m-1)
            return extend_link(with_m, without_m)

def print_partitions(n, m):
        lists = partitions(n, m)
        strings = apply_to_all_link(lambda s: join_link(s, &quot; + &quot;), lists)
        print(join_link(strings, &quot;\n&quot;))

print_partitions(6, 4)
4 + 2
4 + 1 + 1
3 + 3
3 + 2 + 1
3 + 1 + 1 + 1
2 + 2 + 2
2 + 2 + 1 + 1
2 + 1 + 1 + 1 + 1
1 + 1 + 1 + 1 + 1 + 1
</code></pre>
<h2 id="sets">Sets</h2>
<p>built-in Python container type</p>
<ul>
<li>Set literals are enclosed in braces</li>
<li>Duplicate elements are removed on construction</li>
<li>Sets have arbitrary order</li>
</ul>
<p>Checking if an element is in set takes constant time -- implemented by hashing</p>
<pre><code class="language-python">&gt;&gt;&gt; s = {'one', 'two', 'three', 'four', 'four'}
&gt;&gt;&gt; s
{'three', 'one', 'four', 'two'}

&gt;&gt;&gt; 'three' in s
True

&gt;&gt;&gt; len(s)
4

&gt;&gt;&gt; s.union({'one', 'five'})
{'three', 'five', 'one', 'four', 'two'}

&gt;&gt;&gt; s.intersection({'six', 'five', 'four', 'three'})
{'three', 'four'}
&gt;&gt;&gt; s
{'three', 'one', 'four', 'two'} 
</code></pre>
<h2 id="nonlocal-statements">Nonlocal Statements</h2>
<p><strong>Effect</strong></p>
<ul>
<li>Future assignments to that name change its pre-existing binding in the <strong>first non-local frame</strong> of the current environment in which that name is bound.</li>
</ul>
<p><strong>Python Particulars</strong></p>
<ul>
<li>
<p>Python pre-computes which frame contains each name before executing the body of a function.</p>
</li>
<li>
<p>Within the body of a function, all instances of a name must refer to the same frame.</p>
</li>
</ul>
<p>Lists, dictionaries, functions have <strong>local state</strong>.</p>
<p><code>nonlocal</code> statement</p>
<pre><code class="language-python">def make_withdraw(balance):
    &quot;&quot;&quot;Return a withdraw function that draws down balance with each call.&quot;&quot;&quot;
    def withdraw(amount):
        nonlocal balance                 # Declare the name &quot;balance&quot; nonlocal
        if amount &gt; balance:
            return 'Insufficient funds'
        balance = balance - amount       # Re-bind the existing balance name
        return balance
    return withdraw
</code></pre>
<p>Only after a <code>nonlocal</code> statement can a function <em>change</em> the binding of names in these frames.</p>
<p>By introducing <code>nonlocal</code> statements, we have created a dual role for assignment statements. Either they change local bindings, or they change nonlocal bindings.</p>
<p><strong>Benefit</strong></p>
<p>Non-local assignment has given us the ability to maintain some state that is local to a function, inaccessible to the rest of the program.</p>
<p><strong>Cost</strong></p>
<p>It matters whether the instances are bound to the same function or different instances of that function.</p>
<h2 id="mutable-functions">Mutable Functions</h2>
<p>How to create mutable functions?</p>
<ul>
<li>Using non-local statements</li>
</ul>
<pre><code class="language-python">def make_withdraw(balance):
    &quot;&quot;&quot;Return a withdraw function with a starting balance.&quot;&quot;&quot;
    def withdraw(amount):
        nonlocal balance
        if amount &gt; balance:
            return 'Insufficient funds'
        balance = balance - amount
        return balance
    return withdraw
</code></pre>
<ul>
<li>Mutable values can be changed without a nonlocal statement</li>
</ul>
<pre><code class="language-python">def make_withdraw_list(balance):
    b = [balance]
    def withdraw(amount):
        if amount &gt; b[0]:
            return 'Insufficient funds'
        b[0] = b[0] - amount
        return b[0]
    return withdraw
</code></pre>
<p><strong>Referential Transparency</strong></p>
<ul>
<li>Expressions are referentially transparent if substituting an expression with its value does not change the meaning of a program.</li>
<li>Mutation operations violate the condition of referential transparency because they do more than just return a value; <strong>they change the environment</strong>.</li>
</ul>
<h2 id="iterators">Iterators</h2>
<p>An <strong><em>iterator</em></strong> is an object that provides sequential access to values, one by one.</p>
<ul>
<li>An <strong>iterable</strong> value is any value that can be passed to <code>iter</code> to produce an iterator.</li>
<li>An <strong>iterator</strong> is returned from <code>iter</code> and can be passed to <code>next</code>; all iterators are mutable.</li>
</ul>
<p>The way that Python signals that there are no more values available is to raise a <code>StopIteration</code> exception when <code>next</code> is called. This exception can be handled using a <code>try</code> statement.</p>
<pre><code class="language-python">&gt;&gt;&gt; try:
        next(iterator)
    except StopIteration:
        print('No more values')
No more values
</code></pre>
<p>A <strong>container</strong> can provide an iterator that provides access to its elements in order.</p>
<p><strong>Built-in functions</strong></p>
<ul>
<li><code>iter(iterable)</code>: Return an iterator over the elements of an iterable value</li>
<li><code>next(iterator)</code>: Return the next element in an iterator</li>
</ul>
<h2 id="dictionary-iteration">Dictionary Iteration</h2>
<p>A dictionary, its keys, its values, and its items are all iterable values.</p>
<ul>
<li>The order of items in a dictionary is the order in which they were added (Python 3.6+)</li>
<li>Historically, items appeared in an arbitrary order (Python 3.5 and earlier)</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; d = {'one': 1, 'two': 2, 'three': 3}
&gt;&gt;&gt; d['zero'] = 0
</code></pre>
<p>iterate over keys</p>
<pre><code class="language-python">&gt;&gt;&gt; k = iter(d.keys()) # or iter(d)
&gt;&gt;&gt; next(k)
'one'
&gt;&gt;&gt; next(k)
'two'
&gt;&gt;&gt; next(k)
'three'
&gt;&gt;&gt; next(k)
'zero'
</code></pre>
<p>iterate over values</p>
<pre><code class="language-python">v = iter(d.values())
&gt;&gt;&gt; v = iter(d.values())
&gt;&gt;&gt; next(v)
1
&gt;&gt;&gt; next(v)
2
&gt;&gt;&gt; next(v)
3
&gt;&gt;&gt; next(v)
0
</code></pre>
<p>iterate over key-value pairs</p>
<pre><code class="language-python">&gt;&gt;&gt; i  = iter(d.items())
&gt;&gt;&gt; next(i)
('one', 1)
&gt;&gt;&gt; next(i)
('two', 2)
&gt;&gt;&gt; next(i)
('three', 3)
&gt;&gt;&gt; next(i)
('zero', 0)
</code></pre>
<p>Once the dictionary's size/shape/structure is changed, the iterator is invalid.</p>
<p><strong>For Statements</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; r = range(3,6)
&gt;&gt;&gt; for i in r:
...     print(i)
...
3
4
5

&gt;&gt;&gt; ri = iter(r)
&gt;&gt;&gt; next(ri)
3
&gt;&gt;&gt; for i in ri:
...     print(i)
...
4
5
</code></pre>
<h2 id="built-in-iterator-functions">Built-in Iterator Functions</h2>
<p>Many built-in Python sequence operations return iterators that compute results lazily.</p>
<ul>
<li><code>map(func, iterable)</code>: Iterate over func(x) for x in iterable</li>
<li><code>filter(func, iterable)</code>: Iterate over x in iterable if func(x)</li>
<li><code>zip(first_iter, second_iter)</code>: Iterate over co-indexed (x, y) pairs</li>
<li><code>reversed(sequence)</code>: Iterate over x in a sequence in reverse order</li>
</ul>
<p>To view the contents of an iterator, place the resulting elements into a container</p>
<ul>
<li><code>list(iterable)</code>: Create a list containing all x in iterable</li>
<li><code>tuple(iterable)</code>: Create a tuple containing all x in iterable</li>
<li><code>sorted(iterable)</code>: Create a sorted list containing all x in iterable</li>
</ul>
<p><strong>Sequence</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; bcd = ['b', 'c', 'd']
&gt;&gt;&gt; [x.upper() for x in bcd]
['B', 'C', 'D']
</code></pre>
<p><strong>Iterator</strong></p>
<pre><code class="language-python">&gt;&gt;&gt; map(lambda x: x.upper(), bcd)
&lt;map object at 0x00000244BFC9E608&gt;
&gt;&gt;&gt; m = map(lambda x: x.upper(), bcd)
&gt;&gt;&gt; next(m)
'B'
&gt;&gt;&gt; next(m)
'C'
&gt;&gt;&gt; next(m)
'D'
</code></pre>
<p>compute results lazily</p>
<pre><code class="language-python">&gt;&gt;&gt; def double(x):
...     print('**', x, '=&gt;', 2*x, '**')
...     return 2*x
...
&gt;&gt;&gt; m = map(double, range(3,7))
&gt;&gt;&gt; f = lambda y: y &gt;= 10
&gt;&gt;&gt; t = filter(f, m)
&gt;&gt;&gt; next(t)
** 3 =&gt; 6 **
** 4 =&gt; 8 **
** 5 =&gt; 10 **
10
&gt;&gt;&gt; next(t)
** 6 =&gt; 12 **
12
&gt;&gt;&gt; list(t)
[]
</code></pre>
<p>exhaustive results when a list is called</p>
<pre><code class="language-python">&gt;&gt;&gt; list(filter(f, map(double, range(3,7))))
** 3 =&gt; 6 **
** 4 =&gt; 8 **
** 5 =&gt; 10 **
** 6 =&gt; 12 **
[10, 12]
</code></pre>
<p>comparing <code>zip(,)</code> with <code>items()</code></p>
<pre><code class="language-python">&gt;&gt;&gt; d = {'a': 1, 'b': 2}

&gt;&gt;&gt; items = iter(d.items())
&gt;&gt;&gt; next(items)
('a', 1)
&gt;&gt;&gt; next(items)
('b', 2)

&gt;&gt;&gt; zip_items = zip(d.keys(), d.values())
&gt;&gt;&gt; next(zip_items)
('a', 1)
&gt;&gt;&gt; next(zip_items)
('b', 2)
</code></pre>
<h2 id="generators">Generators</h2>
<ul>
<li>A <strong>generator function</strong> is a function that <strong>yields</strong> values instead of <strong>returning</strong> them.</li>
<li>A normal function <strong>returns</strong> once; a <strong>generator function</strong> can <strong>yield</strong> multiple times.</li>
<li>A <strong>generator</strong> is an iterator created automatically by calling a <strong>generator function</strong>.</li>
<li>When a <strong>generator function</strong> is called, it returns a <strong>generator</strong> that iterates over its yields</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; def plus_minus(x):
...     yield x
...     yield -x
...
&gt;&gt;&gt; t = plus_minus(3)
&gt;&gt;&gt; next(t)
3
&gt;&gt;&gt; next(t)
-3
</code></pre>
<p><strong>Generators can Yield from Iterators</strong></p>
<p>A yield from statement yields all values from an iterator or iterable (Python 3.3).</p>
<p><code>yield</code> vs <code>return</code></p>
<p>While a return statement closes the current frame after the function exits, a yield statement causes the frame to be saved until the next time next is called, which allows the generator to automatically keep track of the iteration state.</p>
<p><code>yield</code> vs <code>yield from</code></p>
<p><strong>example 1</strong></p>
<pre><code class="language-python">def countdown(k):
    &quot;&quot;&quot;Count down to zero.
    &gt;&gt;&gt; list(countdown(5))
    [5, 4, 3, 2, 1]
    &quot;&quot;&quot;
    if k &gt; 0:
        yield k
        yield from countdown(k-1)
</code></pre>
<p>otherwise, it will be</p>
<pre><code class="language-python">def countdown(k):
    &quot;&quot;&quot;Count down to zero.
    &gt;&gt;&gt; list(countdown(5))
    [5, 4, 3, 2, 1]
    &quot;&quot;&quot;
    if k &gt; 0:
        yield k
        for x in countdown(k-1):
            yield x
</code></pre>
<p><strong>example 2</strong></p>
<pre><code class="language-python">def substrings(s):
    &quot;&quot;&quot;Yield all substrings of s.
    &gt;&gt;&gt; list(substrings('tops'))
    ['t', 'to', 'top', 'tops', 'o', 'op', 'ops', 'p', 'ps', 's']
    &quot;&quot;&quot;
    if s:
        yield from prefixes(s)
        yield from substrings(s[1:])
</code></pre>
<p><strong>example 3</strong></p>
<pre><code class="language-python">def prefixes(s):
    &quot;&quot;&quot;
    Yield all prefixes of s.
    &gt;&gt;&gt; result = prefixes('dogs')
    &gt;&gt;&gt; list(result)
    ['d', 'do', 'dog', 'dogs']
    &quot;&quot;&quot;
    if s:
        yield from prefixes(s[:-1])
        yield s
</code></pre>
<p><code>yield from</code>, a shortcut, can be replaced by a <code>for</code> statement.</p>
<pre><code class="language-python">def prefixes(s):
    &quot;&quot;&quot;
    Yield all prefixes of s.
    &gt;&gt;&gt; result = prefixes('dogs')
    &gt;&gt;&gt; list(result)
    ['d', 'do', 'dog', 'dogs']
    &quot;&quot;&quot;
    if s:
        for x in prefixes(s[:-1]):
            yield x
        yield s
</code></pre>
<p>changing the order of <code>yield s</code> will get</p>
<pre><code class="language-python">def prefixes2(s):
    &quot;&quot;&quot;
    &gt;&gt;&gt; result = prefixes2('dogs')
    &gt;&gt;&gt; list(result)
    ['dogs', 'dog', 'do', 'd']
    &quot;&quot;&quot;
    if s:
        for x in prefixes(s[:-1]):
            yield x
        yield s
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
