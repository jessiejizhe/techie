<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://jessiejizhe.github.io/techie/CS61A/ex-tree/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>tree - Techie</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Techie</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">CS61A <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../ex-function/" class="dropdown-item">function</a>
</li>
                                    
<li>
    <a href="../ex-recursion/" class="dropdown-item">recursion</a>
</li>
                                    
<li>
    <a href="../ex-sequence/" class="dropdown-item">sequence</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">tree</a>
</li>
                                    
<li>
    <a href="../ex-linked_list/" class="dropdown-item">linked_list</a>
</li>
                                    
<li>
    <a href="../1-intro/" class="dropdown-item">CS61A-intro</a>
</li>
                                    
<li>
    <a href="../2-function/" class="dropdown-item">CS61A-function</a>
</li>
                                    
<li>
    <a href="../3-data_abstraction/" class="dropdown-item">CS61A-data abstraction</a>
</li>
                                    
<li>
    <a href="../4-object_oriented/" class="dropdown-item">CS61A-object oriented</a>
</li>
                                    
<li>
    <a href="../5-computer_programs/" class="dropdown-item">CS61A-computer programs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">DevOps <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../devops/git/" class="dropdown-item">git</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Apache <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Apache/Hadoop/" class="dropdown-item">Hadoop</a>
</li>
                                    
<li>
    <a href="../../Apache/MapReduce/" class="dropdown-item">MapReduce</a>
</li>
                                    
<li>
    <a href="../../Apache/HDFS/" class="dropdown-item">HDFS</a>
</li>
                                    
<li>
    <a href="../../Apache/Spark/" class="dropdown-item">Spark</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../ex-sequence/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../ex-linked_list/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#tree-object" class="nav-link">Tree (object)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#tree-class" class="nav-link">Tree Class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#fibonacci-tree" class="nav-link">Fibonacci Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-a-tree" class="nav-link">Create a Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sum-lables" class="nav-link">Sum Lables</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#leaves" class="nav-link">Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#height" class="nav-link">Height</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prune" class="nav-link">Prune</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#in-order-tbd" class="nav-link">In-Order (TBD)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pre-order" class="nav-link">Pre-Order</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#post-order-tbd" class="nav-link">Post-Order (TBD)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#path-yielder" class="nav-link">Path Yielder</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#is-bst" class="nav-link">is BST?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prune-small" class="nav-link">Prune Small</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#widest-level-tbd" class="nav-link">Widest Level (TBD)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#tree-function" class="nav-link">Tree (function)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#tree-definition" class="nav-link">Tree definition</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#fibonacci-tree_1" class="nav-link">Fibonacci Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#count-partitions" class="nav-link">Count Partitions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#leaves_1" class="nav-link">Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#count-leaves" class="nav-link">Count Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#increment-leaves" class="nav-link">Increment Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#print-trees" class="nav-link">Print Trees</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#print-all-paths" class="nav-link">Print All Paths</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#summing-paths" class="nav-link">Summing Paths</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#copy-tree" class="nav-link">Copy Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tree-height" class="nav-link">Tree Height</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tree-max-path" class="nav-link">Tree Max Path</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#square-tree" class="nav-link">Square Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#find-element-in-tree" class="nav-link">Find Element in Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tree-find-path" class="nav-link">Tree Find Path</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prune-tree" class="nav-link">Prune Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prune-leaves" class="nav-link">Prune Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#sprout-leaves" class="nav-link">Sprout Leaves</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#replace-leaf" class="nav-link">Replace Leaf</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#add-tree" class="nav-link">Add Tree</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tree-map" class="nav-link">Tree Map</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#collect-words" class="nav-link">Collect Words</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#word-in-path" class="nav-link">Word in Path</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#non-consecutive-trade-profit" class="nav-link">Non-consecutive Trade Profit</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="tree-object">Tree (object)</h1>
<h2 id="tree-class">Tree Class</h2>
<pre><code class="language-python">class Tree:
    &quot;&quot;&quot;A tree is a label and a list of branches.&quot;&quot;&quot;

    def __init__(self, label, branches=[]):
        self.label = label
        for branch in branches:
            assert isinstance(branch, Tree)
        self.branches = list(branches)

    def __repr__(self):
        if self.branches:
            branch_str = ', ' + repr(self.branches)
        else:
            branch_str = ''
        return 'Tree({0}{1})'.format(repr(self.label), branch_str)

    def __str__(self):
        return '\n'.join(self.indented())

    def indented(self):
        lines = []
        for b in self.branches:
            for line in b.indented():
                lines.append('  ' + line)
        return [str(self.label)] + lines

    def is_leaf(self):
        return not self.branches

    def map(self, fn):
        &quot;&quot;&quot;
        Apply a function `fn` to each node in the tree and mutate the tree.

        &gt;&gt;&gt; t1 = Tree(1)
        &gt;&gt;&gt; t1.map(lambda x: x + 2)
        &gt;&gt;&gt; t1.map(lambda x : x * 4)
        &gt;&gt;&gt; t1.label
        12
        &gt;&gt;&gt; t2 = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
        &gt;&gt;&gt; t2.map(lambda x: x * x)
        &gt;&gt;&gt; t2
        Tree(9, [Tree(4, [Tree(25)]), Tree(16)])
        &quot;&quot;&quot;
        self.label = fn(self.label)
        for b in self.branches:
            b.map(fn)

    def __contains__(self, e):
        &quot;&quot;&quot;
        Determine whether an element exists in the tree.

        &gt;&gt;&gt; t1 = Tree(1)
        &gt;&gt;&gt; 1 in t1
        True
        &gt;&gt;&gt; 8 in t1
        False
        &gt;&gt;&gt; t2 = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
        &gt;&gt;&gt; 6 in t2
        False
        &gt;&gt;&gt; 5 in t2
        True
        &quot;&quot;&quot;
        if self.label == e:
            return True
        for b in self.branches:
            if e in b:
                return True
        return False
</code></pre>
<h2 id="fibonacci-tree">Fibonacci Tree</h2>
<pre><code class="language-python">def fib_tree(n):
    &quot;&quot;&quot;A Fibonacci tree.
    &gt;&gt;&gt; print(fib_tree(4))
    3
      1
        0
        1
      2
        1
        1
          0
          1
    &quot;&quot;&quot;
    if n == 0 or n == 1:
        return Tree(n)
    else:
        left = fib_tree(n-2)
        right = fib_tree(n-1)
        fib_n = left.label + right.label
        return Tree(fib_n, [left, right])
</code></pre>
<p>if using data abstraction:</p>
<pre><code class="language-python">def fib_tree(n):
    if n &lt;= 1:
        return tree(n)
    else:
        left, right = fib_tree(n-2), fib_tree(n-1)
        return tree(label(left) + label(right), [left, right])
</code></pre>
<h2 id="create-a-tree">Create a Tree</h2>
<pre><code class="language-python">&gt;&gt;&gt; t = Tree(1, [Tree(3), Tree(4)])
&gt;&gt;&gt; t
Tree(1, [Tree(3), Tree(4)])
&gt;&gt;&gt; print(t)
1
  3
  4
</code></pre>
<h2 id="sum-lables">Sum Lables</h2>
<pre><code class="language-python">def sum_labels(t):
    &quot;&quot;&quot;
    Sum the labels of a Tree instance, which may be None.
    &gt;&gt;&gt; sum_labels(fib_tree(5))
    10
    &quot;&quot;&quot;
    return t.label + sum([sum_labels(b) for b in t.branches])
</code></pre>
<h2 id="leaves">Leaves</h2>
<pre><code class="language-python">def leaves(tree):
    &quot;&quot;&quot;Return the leaf values of a tree.

    &gt;&gt;&gt; leaves(fib_tree(4))
    [0, 1, 1, 0, 1]
    &quot;&quot;&quot;
    if tree.is_leaf():
        return [tree.label]
    else:
        return sum([leaves(b) for b in tree.branches], [])
        # all_leaves = []
        # for b in t.branches:
        #     all_leaves.extend(leaves(b))
        # return all_leaves
</code></pre>
<h2 id="height">Height</h2>
<pre><code class="language-python">def height(tree):
    &quot;&quot;&quot;The height of a tree.&quot;&quot;&quot;
    if tree.is_leaf():
        return 0
    else:
        return 1 + max([height(b) for b in tree.branches])
</code></pre>
<h2 id="prune">Prune</h2>
<pre><code class="language-python">def prune(t, n):
    &quot;&quot;&quot;Prune sub-trees whose label value is n.

    &gt;&gt;&gt; t = fib_tree(5)
    &gt;&gt;&gt; prune(t, 1)
    &gt;&gt;&gt; print(t)
    5
      2
      3
        2
    &quot;&quot;&quot;
    t.branches = [b for b in t.branches if b.label != n]
    for b in t.branches:
        prune(b, n)
</code></pre>
<h2 id="in-order-tbd">In-Order (TBD)</h2>
<h2 id="pre-order">Pre-Order</h2>
<pre><code class="language-python">def preorder(t):
    &quot;&quot;&quot;Return a list of the entries in this tree in the order that they
    would be visited by a preorder traversal (see problem description).

    &gt;&gt;&gt; numbers = Tree(1, [Tree(2), Tree(3, [Tree(4), Tree(5)]), Tree(6, [Tree(7)])])
    &gt;&gt;&gt; preorder(numbers)
    [1, 2, 3, 4, 5, 6, 7]
    &gt;&gt;&gt; preorder(Tree(2, [Tree(4, [Tree(6)])]))
    [2, 4, 6]
    &quot;&quot;&quot;
    # if t.is_leaf():
    #     return Tree(t.label)
    # else:
    #     res_tree = Tree(t.label)
    #     for b in t.branches:
    #         res_tree.branches = preorder(b)
    #     return res_tree
    if t.is_leaf():
        return [t.label]
    else:
        res_tree = [t.label]
        for b in t.branches:
            res_tree += preorder(b)
        return res_tree
</code></pre>
<h2 id="post-order-tbd">Post-Order (TBD)</h2>
<h2 id="path-yielder">Path Yielder</h2>
<pre><code class="language-python">def path_yielder(t, value):
    &quot;&quot;&quot;Yields all possible paths from the root of t to a node with the label value
    as a list.

    &gt;&gt;&gt; t1 = Tree(1, [Tree(2, [Tree(3), Tree(4, [Tree(6)]), Tree(5)]), Tree(5)])
    &gt;&gt;&gt; print(t1)
    1
      2
        3
        4
          6
        5
      5
    &gt;&gt;&gt; next(path_yielder(t1, 6))
    [1, 2, 4, 6]
    &gt;&gt;&gt; path_to_5 = path_yielder(t1, 5)
    &gt;&gt;&gt; sorted(list(path_to_5))
    [[1, 2, 5], [1, 5]]

    &gt;&gt;&gt; t2 = Tree(0, [Tree(2, [t1])])
    &gt;&gt;&gt; print(t2)
    0
      2
        1
          2
            3
            4
              6
            5
          5
    &gt;&gt;&gt; path_to_2 = path_yielder(t2, 2)
    &gt;&gt;&gt; sorted(list(path_to_2))
    [[0, 2], [0, 2, 1, 2]]
    &quot;&quot;&quot;
    if t.label == value:
        yield [t.label]
    for b in t.branches:
        for path in path_yielder(b, value):
            yield [t.label] + path
</code></pre>
<h2 id="is-bst">is BST?</h2>
<pre><code class="language-python">def is_bst(t):
    &quot;&quot;&quot;Returns True if the Tree t has the structure of a valid BST.

    &gt;&gt;&gt; t1 = Tree(6, [Tree(2, [Tree(1), Tree(4)]), Tree(7, [Tree(7), Tree(8)])])
    &gt;&gt;&gt; is_bst(t1)
    True
    &gt;&gt;&gt; t2 = Tree(8, [Tree(2, [Tree(9), Tree(1)]), Tree(3, [Tree(6)]), Tree(5)])
    &gt;&gt;&gt; is_bst(t2)
    False
    &gt;&gt;&gt; t3 = Tree(6, [Tree(2, [Tree(4), Tree(1)]), Tree(7, [Tree(7), Tree(8)])])
    &gt;&gt;&gt; is_bst(t3)
    False
    &gt;&gt;&gt; t4 = Tree(1, [Tree(2, [Tree(3, [Tree(4)])])])
    &gt;&gt;&gt; is_bst(t4)
    True
    &gt;&gt;&gt; t5 = Tree(1, [Tree(0, [Tree(-1, [Tree(-2)])])])
    &gt;&gt;&gt; is_bst(t5)
    True
    &gt;&gt;&gt; t6 = Tree(1, [Tree(4, [Tree(2, [Tree(3)])])])
    &gt;&gt;&gt; is_bst(t6)
    True
    &gt;&gt;&gt; t7 = Tree(2, [Tree(1, [Tree(5)]), Tree(4)])
    &gt;&gt;&gt; is_bst(t7)
    False
    &quot;&quot;&quot;

    def bst_max(t):
        if t.is_leaf():
            return t.label
        return max(t.label, bst_max(t.branches[-1]))

    def bst_min(t):
        if t.is_leaf():
            return t.label
        return min(t.label, bst_min(t.branches[0]))

    if t.is_leaf():
        return True
    elif len(t.branches) == 1:
        left = t.branches[0]
        return is_bst(left) and (t.label &gt;= bst_min(left) or t.label &lt; bst_max(left))
    elif len(t.branches) == 2:
        left, right = t.branches[0], t.branches[1]
        return is_bst(left) and is_bst(right) and t.label &gt;= bst_max(left) and t.label &lt;= bst_min(right)
    else:
        return False
</code></pre>
<h2 id="prune-small">Prune Small</h2>
<pre><code class="language-python">def prune_small(t, n):
    &quot;&quot;&quot;Prune the tree mutatively, keeping only the n branches
    of each node with the smallest label.

    &gt;&gt;&gt; t1 = Tree(6)
    &gt;&gt;&gt; prune_small(t1, 2)
    &gt;&gt;&gt; t1
    Tree(6)
    &gt;&gt;&gt; t2 = Tree(6, [Tree(3), Tree(4)])
    &gt;&gt;&gt; prune_small(t2, 1)
    &gt;&gt;&gt; t2
    Tree(6, [Tree(3)])
    &gt;&gt;&gt; t3 = Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2), Tree(3)]), Tree(5, [Tree(3), Tree(4)])])
    &gt;&gt;&gt; prune_small(t3, 2)
    &gt;&gt;&gt; t3
    Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2)])])
    &quot;&quot;&quot;
    while len(t.branches) &gt; n:
        largest = max(t.branches, key=lambda b: b.label)
        t.branches.remove(largest)
    for b in t.branches:
        prune_small(b, n)
</code></pre>
<h2 id="widest-level-tbd">Widest Level (TBD)</h2>
<pre><code class="language-python">def widest_level(t):
    &quot;&quot;&quot;
    &gt;&gt;&gt; sum([[1], [2]], [])
    [1, 2]
    &gt;&gt;&gt; t = Tree(3, [Tree(1, [Tree(1), Tree(5)]),
    ... Tree(4, [Tree(9, [Tree(2)])])])
    &gt;&gt;&gt; widest_level(t)
    [1, 5, 9]
    &quot;&quot;&quot;
    levels = []
    x = [t]
    while x:
        levels.append([b.root for b in x])
        x = sum([b.branches for b in x], [])
        # return max(levels, key=len)
</code></pre>
<h1 id="tree-function">Tree (function)</h1>
<h2 id="tree-definition">Tree definition</h2>
<pre><code class="language-python">def tree(label, branches=[]):
    for branch in branches:
        assert is_tree(branch) # check: each branch is a tree
    return [label] + branches

def label(tree):
    return tree[0]

def branches(tree):
    return tree[1:]

def is_tree(tree):
    if type(tree) != list or len(tree) &lt; 1:
        return False
    for branch in branches (tree):
        if not is_tree(branch):
            return False
    return True

def is_leaf(tree):
    return not branches(tree) # check branches are empty
</code></pre>
<h2 id="fibonacci-tree_1">Fibonacci Tree</h2>
<pre><code class="language-python">def fib_tree(n):
    if n &lt;= 1:
        return tree(n)
    else:
        left, right = fib_tree(n-2), fib_tree(n-1)
        return tree(label(left) + label(right), [left, right])
</code></pre>
<pre><code class="language-python">&gt;&gt;&gt; fib_tree(0)
[0]
&gt;&gt;&gt; fib_tree(1)
[1]
&gt;&gt;&gt; fib_tree(2)
[1, [0], [1]]
&gt;&gt;&gt; fib_tree(3)
[2, [1], [1, [0], [1]]]
&gt;&gt;&gt; fib_tree(4)
[3, [1, [0], [1]], [2, [1], [1, [0], [1]]]]
</code></pre>
<h2 id="count-partitions">Count Partitions</h2>
<pre><code class="language-python">def count_partitions(n, m):
    &quot;&quot;&quot;
    number of positive integer n using parts up to size m
    possibility 1: use at least one 4
    possibility 2: don't use any 4
    &quot;&quot;&quot;
    if n == 0:
        return 1
    elif n &lt; 0:
        return 0
    elif m == 0:
        return 0
    else:
        with_m = count_partitions(n-m, m)
        without_m = count_partitions(n, m-1)
        return with_m + without_m
</code></pre>
<h2 id="leaves_1">Leaves</h2>
<p>Implement leaves, which returns a list of the leaf labels of a tree</p>
<p>hint: if sum a list of lists, you get a list containing the elements of those lists</p>
<pre><code class="language-python">&gt;&gt;&gt; sum([ [1], [2, 3], [4] ], [])
[1, 2, 3, 4]

&gt;&gt;&gt; sum([ [[1]], [2] ], [])
[[1], 2]
</code></pre>
<p>sum only gets rid of one level, doesn't remove all the nested</p>
<pre><code class="language-python">def leaves(tree):
    if is_leaf(tree):
        return [label(tree)]
    else:
        return sum(_____________, [])

# need the sum(list of leaf labels for each branch)
# so, it will be
[leaves(b) for b in branches(tree)]
</code></pre>
<p>finally</p>
<pre><code class="language-python">def leaves(tree):
    &quot;&quot;&quot;Return a list containing the leaf labels of tree.&quot;&quot;&quot;
    if is_leaf(tree):
        return [label(tree)]
    else:
        return sum([leaves(b) for b in branches(tree)], [])
</code></pre>
<h2 id="count-leaves">Count Leaves</h2>
<pre><code class="language-python">def count_leaves(t):
    if is_leaf(t):
        return 1
    else:
        return ([count_leaves(b) for b in branches(t)])
</code></pre>
<h2 id="increment-leaves">Increment Leaves</h2>
<p>a function that creates a tree from another tree is also recursive</p>
<pre><code class="language-python">def increment_leaves(t):
    &quot;&quot;&quot;Return a tree like t but with leaf labels incremented.&quot;&quot;&quot;
    if is_leaf(t):
        return tree(label(t) + 1)
    else:
        # increment all the leaves in the branch
        bs = [increment_leaves(b) for b in branches(t)]
        return tree(label(t), bs)

def increment(t):
    &quot;&quot;&quot;Return a tree like t but with all labels incremented.&quot;&quot;&quot;
    # don't need base case
    return tree(label(t) + 1, [increment(b) for b in branches(t)])
</code></pre>
<h2 id="print-trees">Print Trees</h2>
<p>cannot see the structure</p>
<pre><code class="language-python">def print_tree(t):
    print(label(t))
    for b in branches(t):
        print_tree(b)
</code></pre>
<p>indent to see the structure</p>
<pre><code class="language-python">def print_tree(t, indent=0):
    print('  ' * indent + str(label(t)))
    for b in branches(t):
        print_tree(b, indent+1)
</code></pre>
<h2 id="print-all-paths">Print All Paths</h2>
<pre><code class="language-python">def print_all_paths(t):
    &quot;&quot;&quot;
    Print all the paths from the root to a leaf.
    &gt;&gt;&gt; t = tree(1, [tree(2, [tree(3), tree(5)]), tree(4)])
    &gt;&gt;&gt; print_all_paths(t)
    [1, 2, 3]
    [1, 4]
    &quot;&quot;&quot;
    for path in all_paths(t):
        print(path)

def all_paths(t):
    if is_leaf(t):
        yield [label(t)]
    for b in branches(t):
        for path in all_paths(b):
            yield [label(t)] + path
</code></pre>
<h2 id="summing-paths">Summing Paths</h2>
<p>referring back to factorial</p>
<pre><code class="language-python">def fact(n):
    if n == 0:
        return 1
    else:
        return n * fact(n-1)

def fact_times(n, k):
    &quot;&quot;&quot;Return k * n * (n-1) * ... * 1&quot;&quot;&quot;
    if n == 0:
        return k
    else:
        return fact_times(n-1, k*n) # k*n*(n-1)!

def fact(n):
    return fact_times(n, 1)
</code></pre>
<p>define print function</p>
<pre><code class="language-python">def print_sums(t, so_far):
    so_far = so_far + label(t)
    if is_leaf(t):
        print(so_far)
    else:
        for b in branches(t):
            print_sums(b, so_far)
</code></pre>
<p>test with examples</p>
<pre><code class="language-python">numbers = tree(3, [tree(4), tree(5, [tree(6)])])

haste = tree('h', [tree('a', [tree('s'),
                              tree('t')]),
                   tree('e')])
</code></pre>
<p>results</p>
<pre><code class="language-python">&gt;&gt;&gt; print_sums(numbers, 0)
7
14
&gt;&gt;&gt; print_sums(haste, '')
has
hat
he
</code></pre>
<h2 id="copy-tree">Copy Tree</h2>
<pre><code class="language-python">def copy_tree(t):
    &quot;&quot;&quot;Returns a copy of t. Only for testing purposes.
    &gt;&gt;&gt; t = tree(5)
    &gt;&gt;&gt; copy = copy_tree(t)
    &gt;&gt;&gt; t = tree(6)
    &gt;&gt;&gt; print_tree(copy)
    5
    &quot;&quot;&quot;
    return tree(label(t), [copy_tree(b) for b in branches(t)])
</code></pre>
<h2 id="tree-height">Tree Height</h2>
<pre><code class="language-python">def height(t):
    &quot;&quot;&quot;Return the height of a tree.
    hint: height of a tree is the length of
    the longest path from root to a leaf.

    &gt;&gt;&gt; t = tree(3, [tree(5, [tree(1)]), tree(2)])
    &gt;&gt;&gt; height(t)
    2
    &quot;&quot;&quot;
    if is_leaf(t):
        return 0
    else:
        return 1 + max([height(branch) for branch in branches(t)])
    # alternatively
    # return 1 + max([0] + [height(branch) for branch in branches(t)])
</code></pre>
<h2 id="tree-max-path">Tree Max Path</h2>
<pre><code class="language-python">def max_path(t):
    &quot;&quot;&quot;Return the maximum path of the tree.
    &gt;&gt;&gt; t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])
    &gt;&gt;&gt; max_path(t)
    11
    &quot;&quot;&quot;
    if is_leaf(t):
        return [t[0]]
    else:
        return [t[0]] + max([max_path(branch) for branch in branches(t)])
</code></pre>
<p>Max Path Sum</p>
<pre><code class="language-python">def max_path_sum(t):
    &quot;&quot;&quot;Return the maximum path sum of the tree.
    &gt;&gt;&gt; t = tree(1, [tree(5, [tree(1), tree(3)]), tree(10)])
    &gt;&gt;&gt; max_path_sum(t)
    11
    &quot;&quot;&quot;
    if is_leaf(t):
        return t[0]
    else:
        return max([max_path_sum(branch) for branch in branches(t)]) + t[0]
</code></pre>
<h2 id="square-tree">Square Tree</h2>
<pre><code class="language-python">def square_tree(t):
    &quot;&quot;&quot;Return a tree with the square of every element in t
    &quot;&quot;&quot;
    sq_branches = [square_tree(branch) for branch in branches(t)]
    return tree(label(t)**2, sq_branches)
</code></pre>
<h2 id="find-element-in-tree">Find Element in Tree</h2>
<pre><code class="language-python">def berry_finder(t):
    &quot;&quot;&quot;Returns True if t contains a node with the value 'berry' and 
    False otherwise.
    &quot;&quot;&quot;
    assert is_tree(t)
    if label(t) == 'berry':
        return True
    else:
        for b in branches(t):
            if berry_finder(b):
                return True
    return False
</code></pre>
<h2 id="tree-find-path">Tree Find Path</h2>
<pre><code class="language-python">def find_path(tree, x):
    &quot;&quot;&quot;
    find the path from the parent to the node contains x
    &gt;&gt;&gt; t = tree(2, [tree(7, [tree(3), tree(6, [tree(5), tree(11)])] ), tree(15)])
    &gt;&gt;&gt; find_path(t, 5)
    [2, 7, 6, 5]
    &gt;&gt;&gt; find_path(t, 10) # returns None
    &quot;&quot;&quot;
    if label(tree) == x:
        return [label(tree)]
    for b in branches(tree):
        path = find_path(b, x)
        if path:
            return [label(tree)] + path
</code></pre>
<h2 id="prune-tree">Prune Tree</h2>
<pre><code class="language-python">def prune_tree(t, k):
    &quot;&quot;&quot;
    k = depth
    take in a tree and return a new tree that only contains
    the first k levels of the original tree
    &quot;&quot;&quot;
    assert is_tree(t)
    if k == 0:
        return tree(label(t))
    else:
        return tree(label(t) + [prune_tree(b, k-1) for b in branches(t)])
</code></pre>
<h2 id="prune-leaves">Prune Leaves</h2>
<pre><code class="language-python">def prune_leaves(t, vals):
    &quot;&quot;&quot;Return a modified copy of t with all leaves that have a label
    that appears in vals removed.  Return None if the entire tree is
    pruned away.
    &gt;&gt;&gt; t = tree(2)
    &gt;&gt;&gt; print(prune_leaves(t, (1, 2)))
    None
    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])
    &gt;&gt;&gt; print_tree(numbers)
    1
      2
      3
        4
        5
      6
        7
    &gt;&gt;&gt; print_tree(prune_leaves(numbers, (3, 4, 6, 7)))
    1
      2
      3
        5
      6
    &quot;&quot;&quot;
    if is_leaf(t):
        if label(t) in vals:
            return None
        else:
            return t
    pruned = [prune_leaves(b, vals) for b in branches(t)]
    return tree(label(t), [b for b in pruned if b is not None])
</code></pre>
<h2 id="sprout-leaves">Sprout Leaves</h2>
<pre><code class="language-python">def sprout_leaves(t, leaves):
    &quot;&quot;&quot;Sprout new leaves containing the data in leaves at each leaf in
    the original tree t and return the resulting tree.
    &gt;&gt;&gt; t1 = tree(1, [tree(2), tree(3)])
    &gt;&gt;&gt; print_tree(t1)
    1
      2
      3
    &gt;&gt;&gt; new1 = sprout_leaves(t1, [4, 5])
    &gt;&gt;&gt; print_tree(new1)
    1
      2
        4
        5
      3
        4
        5
    &quot;&quot;&quot;
    if is_leaf(t):
        return tree(label(t), [tree(leaf) for leaf in leaves])
    else:
        return tree(label(t), [sprout_leaves(b, leaves) for b in branches(t)])
</code></pre>
<h2 id="replace-leaf">Replace Leaf</h2>
<pre><code class="language-python">def replace_leaf(t, find_value, replace_value):
    &quot;&quot;&quot;Returns a new tree where every leaf value equal to find_value has
    been replaced with replace_value.

    &gt;&gt;&gt; yggdrasil = tree('odin',
    ...                  [tree('balder',
    ...                        [tree('thor'),
    ...                         tree('freya')]),
    ...                   tree('frigg',
    ...                        [tree('thor')]),
    ...                   tree('thor',
    ...                        [tree('sif'),
    ...                         tree('thor')]),
    ...                   tree('thor')])
    &gt;&gt;&gt; laerad = copy_tree(yggdrasil) # copy yggdrasil for testing purposes
    &gt;&gt;&gt; print_tree(replace_leaf(yggdrasil, 'thor', 'freya'))
    odin
      balder
        freya
        freya
      frigg
        freya
      thor
        sif
        freya
      freya
    &gt;&gt;&gt; laerad == yggdrasil # Make sure original tree is unmodified
    True
    &quot;&quot;&quot;
    if is_leaf(t) and label(t) == find_value:
        return tree(replace_value)
    else:
        return  tree(label(t), [replace_leaf(b, find_value, replace_value) for b in branches(t)])
</code></pre>
<h2 id="add-tree">Add Tree</h2>
<p>iterative</p>
<pre><code class="language-python">def add_trees(t1, t2):
    result_label = label(t1) + label(t2)
    result_branches = []
    i = 0
    while i &lt; min(len(branches(t1)), len(branches(t2))):
        b1, b2 = branches(t1)[i], branches(t2)[i]
        new_branch = add(tree(b1, b2))
        result_branches = result_branches + [new_branch]
        i += 1
    result_branches = result_branches + branches(t1)[i:]
    result_branches = result_branches + branches(t2)[i:]
    return tree(result_label, result_branches)
</code></pre>
<p>use <code>zip</code> to tidy up</p>
<pre><code class="language-python">def add_trees(t1, t2):
    result_label = label(t1) + label(t2)
    result_branches = []
    i = 0
    for b1, b2 in zip(branches(t1), branches(t2)):
        new_branch = add(tree(b1, b2))
        result_branches = result_branches + [new_branch]
    i = len(result_branches)
    result_branches = result_branches + branches(t1)[i:]
    result_branches = result_branches + branches(t2)[i:]
    return tree(result_label, result_branches)
</code></pre>
<p>list comprehension</p>
<pre><code class="language-python">def add_trees(t1, t2):
    &quot;&quot;&quot;
    &gt;&gt;&gt; numbers = tree(1,
    ...                [tree(2,
    ...                      [tree(3),
    ...                       tree(4)]),
    ...                 tree(5,
    ...                      [tree(6,
    ...                            [tree(7)]),
    ...                       tree(8)])])
    &gt;&gt;&gt; print_tree(add_trees(numbers, numbers))
    2
      4
        6
        8
      10
        12
          14
        16
    &gt;&gt;&gt; print_tree(add_trees(tree(2), tree(3, [tree(4), tree(5)])))
    5
      4
      5
    &gt;&gt;&gt; print_tree(add_trees(tree(2, [tree(3)]), tree(2, [tree(3), tree(4)])))
    4
      6
      4
    &gt;&gt;&gt; print_tree(add_trees(tree(2, [tree(3, [tree(4), tree(5)])]), \
    tree(2, [tree(3, [tree(4)]), tree(5)])))
    4
      6
        8
        5
      5
    &quot;&quot;&quot;
    result_label = label(t1) + label(t2)
    result_branches = [add_tree(b1, b2) for b1, b2 in zip(branches(t1), branches(t2))]
    i = len(result_branches)
    result_branches = result_branches + branches(t1)[i:]
    result_branches = result_branches + branches(t2)[i:]
    return tree(result_label, result_branches)
</code></pre>
<h2 id="tree-map">Tree Map</h2>
<pre><code class="language-python">def tree_map(fn, t):
    &quot;&quot;&quot;Maps the function fn over the entries of t and returns the
    result in a new tree.
    &gt;&gt;&gt; numbers = Tree(1,
    ...                [Tree(2,
    ...                      [Tree(3),
    ...                       Tree(4)]),
    ...                 Tree(5,
    ...                      [Tree(6,
    ...                            [Tree(7)]),
    ...                       Tree(8)])])
    &gt;&gt;&gt; print(tree_map(lambda x: 2**x, numbers))
    2
      4
        8
        16
      32
        64
          128
        256
    &quot;&quot;&quot;
    &quot;*** YOUR CODE HERE ***&quot;
    if is_leaf(t):
        return tree(fn(label(t)))
    else:
        return tree(fn(label(t)), [tree_map(fn, b) for b in branches(t)])
</code></pre>
<h2 id="collect-words">Collect Words</h2>
<pre><code class="language-python">def collect_words(t):
    &quot;&quot;&quot;&quot;Return a list of all the words contained in the tree where the value of each node in
the tree is an individual letter. Words terminate at the leaf of a tree.

    &gt;&gt;&gt; greetings = tree('h', [tree('i'),
    ...                        tree('e', [tree('l', [tree('l', [tree('o')])]),
    ...                                   tree('y')])])
    &gt;&gt;&gt; collect_words(greetings)
    ['hi', 'hello', 'hey']

    &quot;&quot;&quot;
    if is_leaf(t):
        return [label(t)]
    else:
        words = []
        for b in branches(t):
            words += [label(t) + w for w in collect_words(b)]
    return words
</code></pre>
<h2 id="word-in-path">Word in Path</h2>
<pre><code class="language-python">def has_path(t, word):
    &quot;&quot;&quot;Return whether there is a path in a tree where the entries along the path
    spell out a particular word.

    &gt;&gt;&gt; greetings = tree('h', [tree('i'),
    ...                        tree('e', [tree('l', [tree('l', [tree('o')])]),
    ...                                   tree('y')])])
    &gt;&gt;&gt; has_path(greetings, 'h')
    True
    &gt;&gt;&gt; has_path(greetings, 'i')
    False
    &gt;&gt;&gt; has_path(greetings, 'hi')
    True
    &gt;&gt;&gt; has_path(greetings, 'hello')
    True
    &gt;&gt;&gt; has_path(greetings, 'hey')
    True
    &gt;&gt;&gt; has_path(greetings, 'bye')
    False
    &quot;&quot;&quot;
    assert len(word) &gt; 0, 'no path for empty word.'
    if label(t) != word[0]:
        return False
    elif len(word) == 1:
        return True
    else:
        for b in branches(t):
            if has_path(b, word[1:]):
                return True
        return False
</code></pre>
<h2 id="non-consecutive-trade-profit">Non-consecutive Trade Profit</h2>
<p>maximum profit to make on trades:<br />
if execute S, then cannot execute trades;<br />
that have an edge directly connected to S.</p>
<pre><code class="language-python">def profit(t):
    &quot;&quot;&quot;Return the max profit.
    &gt;&gt;&gt; t = tree(2, [tree(3), tree(4, [tree(5)])])
    &gt;&gt;&gt; profit(t)
    8
    &quot;&quot;&quot;
    return helper(t, False)

def helper(t, used_parent):
    if used_parent:
        return sum([helper(b, False) for b in branches(t)])
    else:
        use_label_total = label(t) labelsum([helper(b, True) for b in branches(t)])
        skip_label_total = 0 +  sum([helper(b, False) for b in branches(t)])
        return max(use_label_total, skip_label_total)
</code></pre>
<p>W</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
